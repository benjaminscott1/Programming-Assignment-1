#include <stdio.h>  // Define the printf() and scanf() functions.

int main()  // Main function body.
{
    char Message[1024], EncryptedMessage[1024]; // Declares Message and EncryptedMessage as chars.
    int i, c, Key;  // Declare i, c, and Key as integers to be used in the decryption.
    
    printf("CAESAR CIPHER ENCRYPTION WITH KEY\n");
    printf("\nEnter a text for encryption: \n"); // Prints a prompt for the user to enter a text for encryption.
    scanf("%[^\n]", Message);   // Scans the text entered.
    printf("\nEnter a key for encryption: \n");  // Prints a prompt for the user to enter a key.
    scanf("%d", &Key);  // Scans the key entered.
    printf("\nEncrypted Message: \n");  // Prints Encrypted message to user.
    for(i = 0; Message[i] != '\0'; i = i + 1)   // For loop which sets i to zero, until a null is found, and adds one to it.
    {
        if(Message[i] != ' ')   // If there isn't a space present in the input, do the below function.
        {
            if(Message[i] >= 'A' && Message[i] <= 'Z')  // If loop for determining a capital letter text.
            {
                c = Message[i] - 65;   // Takes the message and subtracts 65 from its ASCII assignment.
                EncryptedMessage[i] = ((c + Key) % 26 + 'A');   // Encrypted message is equal to this equation.
                printf("%c", EncryptedMessage[i]);    // Prints the new message output (Encrypted text).
            }
            else if(Message[i] >= 'a' && Message[i] <= 'z')  // Else if convert lower-case letters to upper-case letters.
            {
                c = Message[i] - 97;    // Takes the message and subtracts 97 from its ASCII assignment.
                EncryptedMessage[i] = ((c - Key + 26) % 26 + 'a' - 32);   // Encrypted message is equal to this equation.
                printf("%c", EncryptedMessage[i]);  // Print the new message output (Encrypted text).
            }
            else    // Else print other characters normally as they are read.
            {
                printf("%c", Message[i]);  // Prints characters to the user.
            }
        }
        if(Message[i] == ' ')   // If there's a space present in the input, do the below function.
        {
            printf(" ");    // Prints a space.
        }
    }
    
    printf("\n\n");   // Prints an empty line to make the output more readable to the user.
    
    return 0;   // Returns the program.
}
